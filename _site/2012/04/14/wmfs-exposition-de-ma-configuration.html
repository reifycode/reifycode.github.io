<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>
    
	       WMFS2 : ma configuration
           - reify 
    
    </title>
    
    
    <meta name="description" content="Open web enthusiast, non-writer writer, Iceland dreamer.">
    
    
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <link rel="alternate" type="application/rss+xml" title="Schoewilliam.fr RSS (FR posts)" href="/flux.xml">
    <link rel="alternate" type="application/rss+xml" title="Schoewilliam.fr RSS (EN posts)" href="/feed.xml">

    <meta name="author" content="William Dorffer aka. Schoewilliam">
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    
  </head>
  
  <body class="post">
  
    <header>
        <div class="left">
            <a onclick="document.querySelector('body > aside').classList.toggle('nav-shown'); document.querySelector('.menu').classList.toggle('shown');" class="menu"><span class="mega-octicon octicon-three-bars"></span></a>
            
            <a class="small-site-title" href="/">Schoewilliam</a>
            
        </div>
        <div class="right">
            
            
            
                <a class="active" href="/2012/04/14/wmfs-exposition-de-ma-configuration.html">fr</a>
            
            <a title="Allumer/Éteindre la lumière" class="lights"><span class="mega-octicon octicon-light-bulb"></span></a>
        </div>
    </header>

    <aside>
        <div class="book-title">
            
                <h1>WMFS2 : ma configuration</h1>
            
        </div>

        <nav id="nav">
    
        <a href="/a-propos">À Propos</a>
    
        <a href="/projets">Projets</a>
    
        <a href="/archive">Blog</a>
    
        <a href="/a-propos#contact">Contact</a>
    
</nav>


        <nav id="prevnext">
           
                
                    <a class="prev" title="Adoption du clavier BÉPO : 8 mois après." href="/2012/03/10/adoption-du-clavier-bepo-8-mois-apres.html">
                        Article précédent
                    </a>
                

                
                    <a class="next" title="Monsterwm : configuration et joyeusetés" href="/2013/01/11/monsterwm.html">
                        Article suivant
                    </a>
                
           
        </nav>
    </aside>


    <!-- Page content -->
    <section>
    <div class="post">
        

        <time datetime='14 April 2012' class="top">
  
  
    14
  



 
 avril
    

2012
</time>
        <p>WMFS, est un tiling window manager très simple à configurer, au point qu’on n’ait en général qu’à personnaliser le schéma de couleurs. Le plus gros du boulot se situera principalement autour des statusbars. On s’attardera d’ailleurs sur ces dernières dans la seconde partie de ce billet.</p>

<h2 id="comportement-et-couleurs">Comportement et couleurs</h2>

<p>WMFS tend davantage vers le <strong>twm manuel</strong>. C’est-à-dire que son <em>layout</em> (la disposition de son pavage) n’est pas fixe, et s’improvise au cours de l’utilisation. C’est un concept voilà très différent de celui de Awesome WM (par exemple), qui lui propose un certain nombre de disposition fixes.</p>

<p>On ne jouera pas au guide, le <strong><a href="https://github.com/xorg62/wmfs/wiki">wiki</a></strong> s’en charge déjà très bien. En revanche donc, il faudrait savoir que la section <code>[themes]</code>…<code>[/themes]</code> du fichier principal <code>~/.config/wmfsrc</code> permet justement de mettre WMFS à son goût.</p>

<p>Du côté du lexique, <strong>bars</strong> désigne évidemment les barres d’informations, <code>tags</code> — ici — les boutons de chaque espace de travail, et enfin <code>client</code> désigne une fenêtre.<br />
Les options se terminant par <code>_statusline</code> permettent d’afficher, grâce à <a href="https://github.com/xorg62/wmfs/wiki/statusbar_fr" target="blank">la syntaxe spécifique</a>, du contenu dans la zone souhaitée. C’est ainsi, par exemple, qu’un label « <strong>··· Actif</strong> » apparait sur mes clients qui ont le focus.</p>

<ul>
  <li>Mon fichier wmfsrc est disponible en entier sur <a href="https://github.com/Schoewilliam/configs/blob/master/wmfs/wmfsrc">mon dépôt git</a>.</li>
</ul>

<h2 id="statusbars">Statusbars</h2>
<p>Pour grossir le trait, avec la commande <code>$ wmfs -c status "testbar BLABLA"</code>, « BLABLA » apparaitra dans la zone <em>status</em> de la barre du nom « <em>testbar</em> ». Là où c’est intéressant, c’est qu’on peut donc s’en servir, pour afficher en temps réel, <strong>le résultat d’un script conky</strong> :</p>

<pre><code>#!/bin/sh  
conky -c ~/.config/wmfs/scripts/conkyrc_top | while true; read line; do wmfs -c status "testbar $line"; done &amp;
</code></pre>

<p>Évidemment l’idéal serait de lancer tout cela au démarrage de la session X.</p>

<p>Puisque conky nous permet de gratter facilement les informations dont on a besoin, grâce à ses fonctions,  il ne nous manque plus qu’à y coupler <a href="https://github.com/xorg62/wmfs/wiki/statusbar_fr">la syntaxe</a> :</p>

<pre><code>out_to_console yes
out_to_x no
background yes
update_interval 1
total_run_times 0
no_buffers yes

TEXT
^i[right;0;0;/home/william/.config/wmfs/icons/stat/clock.png] ^s[right;\#BBBBBB; Uptime:] ^s[right;\#BDE077; $uptime_short]\
^s[right;\#444444;   |   ]\
^i[right;0;0;/home/william/.config/wmfs/icons/stat/fs_01.png] ^s[right;\#BBBBBB; HDD:] ^s[right;\#A6D4E0; ${fs_used_perc /}% ] ^p[right;8;10;0;${fs_used_perc /};100;\#445544;\#A6D4E0;ckyhdd](1;spawn;urxvt -e df -h)\
^s[right;\#444444;   |   ]\
^i[right;0;0;/home/william/.config/wmfs/icons/stat/ship.png] ^s[right;\#BBBBBB; Kernel:] ^s[right;\#FDA53C; $kernel]\
^s[right;\#444444;   |   ]\
^i[right;0;0;/home/william/.config/wmfs/icons/stat/netdown.png] ^s[right;\#BBBBBB; IP:] ^s[right;\#E8DD9E; ${addr wlan0}](1;spawn;urxvt -e wicd-curses)\
^s[right;\#444444;   |   ]\
^i[right;0;0;/home/william/.config/wmfs/icons/stat/spkr_01.png] ^s[right;\#BBBBBB; Volume: ] ^s[right;\#A6D4E0;${exec amixer get Master | grep "Mono: P" | awk '{print $4}' | grep -oE "[[:digit:]]{1,}"%} ](1;spawn;urxvt -e alsamixer)  ^p[right;8;10;0;${exec amixer get Master | grep "Mono: P" | awk '{print $4}' | grep -oE "[[:digit:]]{1,}"};100;\#445544;\#A6D4E0;ckyhdd](1;spawn;urxvt -e alsamixer)\
^s[right;\#444444;   |   ]\
^i[right;0;0;/home/william/.config/wmfs/icons/stat/clock.png]\ ^s[right;\#CCCCCC; ${time %a %d %b}] ^s[right;\#A6D4E0; ${time %H:%M}   ]\
</code></pre>

<p>Voilà qui nous donne magnifiquement :</p>

<p><a href="/images/wmfs/wmfs-status1.png"><img src="/images/wmfs/wmfs-status1.png" alt="Status Top" class="align" /></a></p>

<p>C’est exact, puisque grâce à cette mystérieuse syntaxe, au-delà d’afficher des informations ô combien utiles, notre statusbar sera <strong>interactive</strong> aux clics de la souris.</p>

<p><a href="/images/wmfs/wmfs-moc.png"><img src="/images/wmfs/wmfs-moc.png" alt="MOC intégré à la statusbar de WMFS" class="align" /></a></p>

<p>(Dans le cas d’un script conky :)</p>

<pre><code>${if_running mocp}\
${if_match "${exec mocp -Q %state}" == "PLAY"}^s[right;\#BDE077;{ ]^i[right;0;0;/home/william/.config/wmfs/icons/stat/pause.png](1;spawn;mocp -G)^s[right;\#BDE077; }]$endif\
${if_match "${exec mocp -Q %state}" == "PAUSE"}^s[right;\#FDA53C;{ ]^i[right;0;0;/home/william/.config/wmfs/icons/stat/play.png](1;spawn;mocp -G)^s[right;\#FDA53C; }]$endif\
${if_match "${exec mocp -Q %state}" == "STOP"}^s[right;\#A6D4E0;{ ]^i[right;0;0;/home/william/.config/wmfs/icons/stat/stop.png](1;spawn;mocp -p)^s[right;\#A6D4E0; }  ]$endif\
$endif\
</code></pre>

<p><strong>Littéralement</strong>; on vérifie si <em>mocp</em> est lancé (<strong>ligne 1</strong>);<br />
si MOC est en mode PLAY, afficher l’image <code>~/.config/wmfs/icons/stat/pause.png</code> — cette même image, lancera la commande <code>mocp -G</code> (<em>toggle play/pause</em>) si elle est cliquée (<strong>ligne 2</strong>);<br />
enfin, on réitère pour les actions Pause, et Stop (<strong>lignes 3 et 4</strong>) en changeant les éléments nécessaires.</p>

<ul>
  <li>La totalité de mes conky sur mon <a href="https://github.com/Schoewilliam/configs/tree/master/wmfs/scripts"><strong>dépôt git</strong></a></li>
</ul>

<p>On terminera sur la fonctionnalité phare de cette syntaxe : les <strong>graphiques</strong>, et <strong>barres de progression</strong>. On n’a que trois éléments à fournir : les couleurs, la valeur actuelle, et la valeur maximale. Notre cher WMFS se charge du reste.</p>

<pre><code>^g[left;80;10;${cpu};100;\#333333;\#FDA53C;ckycpu](1;spawn;urxvt -e htop)
</code></pre>

<p>Sur le modèle <code>^g[{alignement};{largeur};{hauteur};{valeur actuelle};{valeur maximale};{couleur BG};{couleur FG};{ID du graphe}](1;spawn;{commande à lancer au clic})</code>.</p>

<h2 id="capture-finale">Capture finale</h2>

<p><a href="/images/captures/2012-04-14.png"><img src="/images/captures/2012-04-14.png" alt="Capture finale" width="685px" class="align center" /></a></p>

<p>Puisqu’il aurait été évidemment un crime abominable, reconnu dans 20 pays occidentaux, de terminer ce petit billet sans même une capture d’écran.</p>


        <p style="text-align:right;">
        
        
        
        </p>
    </div>
</section>


    <script src="/js/nightmode.js" type="text/javascript"></script>
    <script src="/js/smooth-scroll.js" type="text/javascript"></script>

     <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.schoewilliam.fr/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.schoewilliam.fr/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

  </body>
</html>
