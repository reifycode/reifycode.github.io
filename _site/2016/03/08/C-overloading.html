<!DOCTYPE html>
<html>
  <head>
    <meta name="theme-color" content="#ffffff">
    <meta charset="UTF-8">
    <title>
    
	       Function overloading in C
            - reify 
    
    </title>
    
    
    <meta name="description" content="We are a group of Computer Science enthusiasts looking to find our way in the world of Computer Science.">
    
    
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <link rel="alternate" type="application/rss+xml" title="Schoewilliam.fr RSS (EN posts)" href="/feed.xml">

    <meta name="author" content="Shreyash PatodiaPulkit Agarwal">
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    
  </head>
  
  <body class="post">
    
  
    <header>
        <div class="left">
            <a onclick="document.querySelector('body > aside').classList.toggle('nav-shown'); document.querySelector('.menu').classList.toggle('shown');" class="menu">
                <span class="mega-octicon octicon-three-bars">
                </span>
            </a>
            
            <a href="/" class="small-site-title">reify</a>
            
        </div>
        <div class="right">
            
            
               
            
        <a title="Switch the lights ON/OFF" class="lights">
            <span class="mega-octicon octicon-light-bulb">
            </span>

        </a>


        </div>
    </header>

    <aside>
    	<div id="bg-wrapper"></div>
        <div class="book-title">
            
                <h1>Function overloading in C</h1>
            
        </div>

        <nav id="nav">
    
        <a href="/about">About</a>
    
        <a href="/projects">Projects</a>
    
        <a href="/archive">Blog</a>
    
        <a href="/about#contact">Contact</a>
    
</nav>


        <nav id="prevnext">
           
                <a  href="/archive">All Posts</a>
           
        </nav>
    </aside>


    <!-- Page content -->
    <section>
    <div class="post">
        

         

	<span> <img src=/images/layout/photos/shreyash.png class="avatar" style="float:left; width:30px; height:30px; margin-left:0;"> </img></span>
    <span>&nbsp; by <a href="/shreyashpatodia">Shreyash Patodia</a></span>
 
        
        <time datetime='8 March 2016' class="top">
  
    8<sup>th
    </sup> of

March
2016
</time>
        <p>Greetings everyone !!</p>

<p>Have you ever looked at the printf function in C and thought, if C doesn’t support overloading how does it take different number of arguments to printf.</p>

<p>Now the topic of function of overloading in C is one that I find very interesting since it does not support overloading(well, it kind of does now ! Read on for more) in a traditional Java-like way. But by messing around a little bit we can learn some really cool ways to implement the same(read:similar) functionality.</p>

<p>The first way to get the effect of overloading is by using an array of function pointers. An example to a program that uses this is this implementation of finding the nth fibonacci number:</p>

<noscript><pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;
#include &lt;time.h&gt;

long fibo1(int n); // Implements fibonacci series recursively
long fibo2(int n); // Implements fibonacci series iteratively

/* Program takes input through the command line -&gt; First argument is: 1 for recursion, 2 for iteration Second argument is: the number of the fibonacci term that you want */

int main( int argc, char *argv[])
{
	clock_t begin, end;
	double time_spent;  // clock just measures the running time of the program

	begin = clock();

	long ans;  // Our ans to the nth fibonacci number 
	int n = atoi(argv[2]); // nth fibonacci number needed, atoi converts the strings from command line to numbers
	long (*F[2])(int);  //array of function pointers, keep in mind the brackets. 
	F[0] = fibo1;   
	F[1] = fibo2;
	int m = atoi(argv[1]);  // the function the user wants us to use.
	
	ans = F[m-1](n); 	
	printf(&quot;%ld\n&quot;, ans);


	end = clock();
	time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
	printf(&quot;%lf\n&quot;, time_spent);

	return 0;
}

long fibo1(int n)  // recursive solution
{
	if (n&lt;=2)
	{
		return 1;
	}
	return (fibo1(n-1) + fibo1(n-2));
}

long fibo2(int n)  // iterative solution
{
	int i; 
	int fibo[3];
	fibo[1] = fibo[0] = 1;
	int temp; 
	for( i = 2; i &lt; n; i++)
	{
		fibo[i%3] = fibo[(i-1)%3] + fibo[(i-2)%3];

	}

	return fibo[(i-1)%3];
}

</pre></noscript>
<script src="https://gist.github.com/ShreyashPatodia/b5f41a957f59214c30fe.js"> </script>

<p>Although, not strictly equivalent to function overloading creating an array of functions that do the same task gives a clear idea of the relationships between the functions. We don’t even need to have different parameter lists in order for the program to know it needs to implement different functions. Moreover we can code-up a Java-like like implementation using the fact that argv tells us the number of command line inputs to the program so we can use it to implement different functions in an array of functions.</p>

<p>Moving on, the other method to do overloaded functions in C is to use _Generic. Using _Generic is the closest thing to function-overloading that C can offer. It allows us to list a number of possibilities for a argument to a function and take action accordingly. For example:</p>

<noscript><pre>// Credits: http://stackoverflow.com/questions/479207/function-overloading-in-c
foo_int (int a)
foo_char (char b)  
foo_float_int (float c , int d)

#define foo(_1, ...) _Generic((_1),                                  \
                              int: foo_int,                          \         /* Call foo_int if _1 is an integer */
                              char: foo_char,                        \         /* Call foo_char if _! is a character */
                              float: _Generic((FIRST(__VA_ARGS__,)), \         /* nesting */
                                     int: foo_float_int))(_1, __VA_ARGS__)
#define FIRST(A, ...) A</pre></noscript>
<script src="https://gist.github.com/ShreyashPatodia/a74f53d8ad61787086ec.js"> </script>

<p>Lastly, C uses something varargs to do implement the previously mentioned printf function where the idea is to take a char * input in order to allow variable argument lists. 
Here is the version of GNU version of the printf function:</p>

<noscript><pre>// GNU&#39;s printf function. 
__printf (const char *format, ...)
{
   va_list arg;
   int done;

   va_start (arg, format);
   done = vfprintf (stdout, format, arg);
   va_end (arg);

   return done;
}</pre></noscript>
<script src="https://gist.github.com/ShreyashPatodia/081db16685e300b26076.js"> </script>

<p>Note: printf is not the real function implementing the printing, vfprintf does all the heavy-lifting. So there is not much to see up there.</p>



        <p style="text-align:right;">
        
        
            <span style="float:right; margin-left:.25em;" class="mega-octicon octicon-tag"></span>
            <a href="/archive#c">C</a>.
        
        
        </p>
    </div>
</section>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-71545031-1', 'auto');
      ga('send', 'pageview');

    </script>
    <script src="/js/nightmode.js" type="text/javascript"></script>
    <script src="/js/smooth-scroll.js" type="text/javascript"></script>

     <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.reifycode.github.io/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.reifycode.github.io      /piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

  </body>
</html>
