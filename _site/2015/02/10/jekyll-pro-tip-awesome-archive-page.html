<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>
    
	       Jekyll pro tip: how to design an awesome Archive page.
           - Schoewilliam 
    
    </title>
    
    
    <meta name="description" content="Open web enthusiast, non-writer writer, Iceland dreamer.">
    
    
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <link rel="alternate" type="application/rss+xml" title="Schoewilliam.fr RSS (FR posts)" href="/flux.xml">
    <link rel="alternate" type="application/rss+xml" title="Schoewilliam.fr RSS (EN posts)" href="/feed.xml">

    <meta name="author" content="William Dorffer aka. Schoewilliam">
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    
    <style>
        body:before {
            background-image: url(/images/wikicommons/1024px-Dr_Jekyll_and_Mr_Hyde_poster_edit2.jpg);
            background-position: center center;
            opacity: .4;
        }
    </style>
    
  </head>
  
  <body class="post">
  
    <header>
        <div class="left">
            <a onclick="document.querySelector('body > aside').classList.toggle('nav-shown'); document.querySelector('.menu').classList.toggle('shown');" class="menu"><span class="mega-octicon octicon-three-bars"></span></a>
            
            <a class="small-site-title" href="/en">Schoewilliam</a>
            
        </div>
        <div class="right">
            
            
            
                <a class="active" href="/2015/02/10/jekyll-pro-tip-awesome-archive-page.html">en</a>
            
            <a title="Switch the lights ON/OFF" class="lights"><span class="mega-octicon octicon-light-bulb"></span></a>
        </div>
    </header>

    <aside>
        <div class="book-title">
            
                <h1>Jekyll pro tip: how to design an awesome Archive page.</h1>
            
        </div>

        <nav id="nav">
    
        <a href="/about">About</a>
    
        <a href="/projects">Projects</a>
    
        <a href="/en/archive">Blog</a>
    
        <a href="/about#contact">Contact</a>
    
</nav>


        <nav id="prevnext">
           
                
                    <a class="prev" title="Petites de mes nouvelles #5 : simple remaniement." href="/2015/02/09/petites-nouvelles-5.html">
                        Previous post
                    </a>
                

                
                    <a class="next" title="Sélection d'applications pour Firefox OS #2" href="/2015/02/14/applications-firefox-os.html">
                        Next post
                    </a>
                
           
        </nav>
    </aside>


    <!-- Page content -->
    <section>
    <div class="post">
        

        <time datetime='10 February 2015' class="top">
  
  
    10<sup>th
    </sup> of
  



  February

2015
</time>
        <p><em>(TL;DR) I explain how I designed my dynamic <a href="/archive">Archive page</a> using Jekyll+Liquid syntax logic and a bit of CSS. (<a href="#demo">Jump to the demo bit</a>)</em></p>

<p>Today, I wanted to sort my posts into categories, so as to have a more organised weblog overall.<br />
Jekyll handles categories pretty well actually. One has to add a <code>category: foo</code> line (<em>foo</em> being a category name) in the YAML head of a post, and that’s it! (use <code>categories: [foo1,foo2]</code> if you set more than one category to a post).</p>

<p>The difficult part is to setup a page that would allow the user to filter posts by categories.<br />
I did stumble upon some Jekyll plugins that can automatically generate category indexes, which is quite practical indeed. I did not want, however, to use any plugin. That is why I had to try do something with liquid tags only. Also, the idea was to have only <em>one</em> page do the work.</p>

<hr />

<h2 id="the-liquid-logic">The liquid logic</h2>

<p>We have main 3 objectives:</p>

<ul>
  <li>Design a navigation section — It consists of a list of links, each for a category that exists. The links will actually be anchors.</li>
  <li>Display the entire list of posts in a bloc — Because a user may want to navigate through a pure, chronologicaly ordered, list of your posts. And also because some of your posts may have no category attached to them, they would need to be shown somewhere.</li>
  <li>Display a list of posts <strong>for each category</strong>.</li>
</ul>

<p>You get the idea: we have navigation links to switch between a entire feed of your posts or between your categories ; and below them is displayed the chosen feed or category.<br />
This way, the user can easily navigate through all your posts and their categories without having to deal with multiples pages.</p>

<ul>
  <li><strong>The navigation section.</strong></li>
</ul>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="lineno">1</span> <span class="nt">&lt;nav&gt;</span>
<span class="lineno">2</span>     <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#allposts&quot;</span><span class="nt">&gt;</span>All posts<span class="nt">&lt;/a&gt;</span>
<span class="lineno">3</span>     {% for category in site.categories %}
<span class="lineno">4</span>         <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#{{ category | first | remove:&#39; &#39; }}&quot;</span><span class="nt">&gt;&lt;strong&gt;</span>{{ category | first }}<span class="nt">&lt;/strong&gt;&lt;/a&gt;</span> {% if forloop.last %}.{% else %}, {% endif %}
<span class="lineno">5</span>     {% endfor %}
<span class="lineno">6</span> <span class="nt">&lt;/nav&gt;</span></code></pre></div>

<p><strong>Line 2</strong>, we include a static link pointing to <code>#allposts</code>. When clicked, it will display the entire, unfiltered, list of posts.<br />
<strong>Lines 3 to 5</strong>, We’re using a <em>loop</em> to get all categories, and for each <code>category</code> create a link.</p>

<p>Each link points to <code>#{{ category | first | remove:' ' }}</code>. Those parameters passed to <code>{{ category }}</code> help creating an <em>anchor-proof</em> string from the category name.<br />
For example, for a category named “<em>My Travels around the world</em>”, the above will output : <code>#mytravelsaroundtheworld</code>.<br />
<em><strong>Note</strong>: We will use the same liquid tag to define the bloc IDs to which the links we just created point to.</em></p>

<ul>
  <li><strong>The entire, unfiltered, list of posts</strong></li>
</ul>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="lineno"> 1</span> <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;catbloc&quot;</span> <span class="na">id=</span><span class="s">&quot;allposts&quot;</span><span class="nt">&gt;</span>
<span class="lineno"> 2</span>     <span class="nt">&lt;h2&gt;</span>All posts<span class="nt">&lt;/h2&gt;</span>
<span class="lineno"> 3</span>     
<span class="lineno"> 4</span>         <span class="nt">&lt;ul&gt;</span>
<span class="lineno"> 5</span>             {% for post in site.posts %}
<span class="lineno"> 6</span>                 <span class="nt">&lt;li&gt;</span>
<span class="lineno"> 7</span>                     <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>
<span class="lineno"> 8</span>                     <span class="nt">&lt;time&gt;</span>{{ post.date | date: &quot;%-d %B %Y&quot; }}<span class="nt">&lt;/time&gt;</span>
<span class="lineno"> 9</span>                     {{ post.title }}
<span class="lineno">10</span>                     <span class="nt">&lt;/a&gt;</span>
<span class="lineno">11</span>                 <span class="nt">&lt;/li&gt;</span>
<span class="lineno">12</span>             {% endfor %}
<span class="lineno">13</span>         <span class="nt">&lt;/ul&gt;</span>
<span class="lineno">14</span> <span class="nt">&lt;/div&gt;</span></code></pre></div>

<p>This is no rocket science. If you use Jekyll, you’ve probably done something like that to display a chronological list of all your posts.</p>

<p>What is important here, <strong>Line 1</strong>, is to surround the usual loop with a <code>div</code> whose ID is <code>allposts</code> (Remember we set a link pointing to <code>#allposts</code> in the navigation section).<br />
The class <code>catbloc</code> is quite important too. It must be the same for this bloc and all of the category blocs, which we will deal with right below.</p>

<ul>
  <li><strong>The category sections</strong></li>
</ul>

<p>Now, for each category, we will list the posts it contains (the loop used <strong>Line 1</strong>):</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="lineno"> 1</span> {% for category in site.categories %}
<span class="lineno"> 2</span>     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;catbloc&quot;</span> <span class="na">id=</span><span class="s">&quot;{{ category | first | remove:&#39; &#39; }}&quot;</span><span class="nt">&gt;</span>
<span class="lineno"> 3</span>         <span class="nt">&lt;h2&gt;</span>{{ category | first }}<span class="nt">&lt;/h2&gt;</span>
<span class="lineno"> 4</span>         
<span class="lineno"> 5</span>         <span class="nt">&lt;ul&gt;</span>
<span class="lineno"> 6</span>            {% for posts in category %}
<span class="lineno"> 7</span>              {% for post in posts %}
<span class="lineno"> 8</span>                {% if post.url %}
<span class="lineno"> 9</span>                  <span class="nt">&lt;li&gt;</span>
<span class="lineno">10</span>                    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>
<span class="lineno">11</span>                      <span class="nt">&lt;time&gt;</span>{{ post.date | date: &quot;%-d %B %Y&quot; }}<span class="nt">&lt;/time&gt;</span>
<span class="lineno">12</span>                      {{ post.title }}
<span class="lineno">13</span>                    <span class="nt">&lt;/a&gt;</span>
<span class="lineno">14</span>                  <span class="nt">&lt;/li&gt;</span>
<span class="lineno">15</span>                {% endif %}
<span class="lineno">16</span>              {% endfor %}
<span class="lineno">17</span>            {% endfor %}
<span class="lineno">18</span>         <span class="nt">&lt;/ul&gt;</span>
<span class="lineno">19</span>     <span class="nt">&lt;/div&gt;</span>
<span class="lineno">20</span> {% endfor %}</code></pre></div>

<p>Note, <strong>on Line 2</strong>, we’re setting the id of the bloc to our same <em>anchor-proof</em> string made from the category name (without the <code>#</code>, this time, of course).</p>

<h2 id="the-css-switching-mechanism">The CSS switching mechanism</h2>

<p>We only want our navigation section to be permanently on screen. We want the other sections to appear <strong>only if we click the link pointing to them</strong>.<br />
I will be using here the <code>:target</code> CSS pseudo-class.</p>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.catbloc</span><span class="nd">:not</span><span class="o">(</span><span class="nd">:target</span><span class="o">)</span> <span class="p">{</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>That’s… basically it.<br />
The situation described here is that any element whose class is set to <code>catbloc</code>, and that is not being targeted by any anchor, won’t be displayed.</p>

<p>In other words, to make a section appear, the user has to click the link that points to its anchor.</p>

<ul>
  <li><strong id="demo">Have a demo</strong></li>
</ul>

<iframe width="100%" height="300" src="http://jsfiddle.net/schoewilliam/trbkq2th/3/embedded/result,html,css/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<ul>
  <li><strong>And with a bonus CSS animation</strong></li>
</ul>

<iframe width="100%" height="300" src="http://jsfiddle.net/schoewilliam/trbkq2th/6/embedded/result,html,css/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<ul>
  <li>And for a practical and tangible demo, you can have a look at my <a href="/archive">own Archive page</a></li>
</ul>

<h2 id="done">Done</h2>

<p>I like this layout a lot. I think this is both great functionality and great UX at a really low cost.
Feel free to tell me what you think.</p>


        <p style="text-align:right;">
        
        
            <span style="float:right; margin-left:.25em;" class="mega-octicon octicon-tag"></span>
            <a href="/en/archive#jekyll">Jekyll</a>.
        
        
        </p>
    </div>
</section>


    <script src="/js/nightmode.js" type="text/javascript"></script>
    <script src="/js/smooth-scroll.js" type="text/javascript"></script>

     <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.schoewilliam.fr/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.schoewilliam.fr/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

  </body>
</html>
